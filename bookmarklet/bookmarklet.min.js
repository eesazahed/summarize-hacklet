javascript:(()=>{let e=e=>{let t=document.querySelector(".summary-popup");t&&t.remove();let r=document.createElement("div");if(r.className="summary-popup",r.innerHTML=`<div class="summary-inner">${e}<button class="summary-close">&times;</button></div>`,!document.querySelector('link[href*="popup.css"]')){let a=document.createElement("link");a.rel="stylesheet",a.href="https://cdn.jsdelivr.net/gh/eesazahed/summarize-hacklet@main/bookmarklet/popup.min.css",document.head.appendChild(a)}r.querySelector(".summary-close").addEventListener("click",()=>{r.classList.add("fade-out"),setTimeout(()=>r.remove(),300)}),document.body.appendChild(r)},t=e=>e.replace(/^### (.*$)/gim,"<h3>$1</h3>").replace(/^## (.*$)/gim,"<h2>$1</h2>").replace(/^# (.*$)/gim,"<h1>$1</h1>").replace(/\*\*(.*?)\*\*/gim,"<strong>$1</strong>").replace(/\*(.*?)\*/gim,"<em>$1</em>").replace(/^- (.*$)/gim,"<ul><li>$1</li></ul>").replace(/\n/gim,"<br>"),r=window.getSelection().toString().trim();if(""===r){e("You need to select some text to summarize.");return}e("Generating summary..."),fetch("https://summarize-hacklet.vercel.app/api",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({text:r})}).then(e=>e.json()).then(r=>{if(!r.summary){e("No summary returned.");return}let a=t(r.summary);e(`<div class="popup-content">${a}</div>`)}).catch(t=>{e(`Error: ${t}`)})})();